<template>
  <lightning-card icon-name="custom:custom19" title='Read CSV File Demo In LWC'> 
    <div if:true={toggleFileUpload} style="margin-left: 3%">
        <lightning-file-upload
        label="Attach"
        name="fileUploader"
        accept={acceptedFormats}
        record-id={myRecordId}
        onuploadfinished={handlePrecursor}
        multiple>
      </lightning-file-upload>        
    </div><br/>
    <div if:true={toggleSpinner}>
      <c-loading-spinner></c-loading-spinner>
    </div>
      

    <div if:true={count} class="slds-grid slds-align_absolute-center" style="max-width: 80%;box-shadow: 1px 1px 2px 3px #ccc">
      <div class="slds-col " style="padding: 2.5px">
          <div class="slds-grid slds-grid--align-center slds-grid_vertical" style="padding: 2rem; margin-left: 3rem;">
            <div class="slds-col" style="margin: 2.5px 0px 2px 20px; ">
              <article class="slds-tile slds-tile_board">
                <h3 class="slds-tile__title slds-truncate" title="Total Schedules">
                    <a href="javascript:void(0);">Matched Schedules :</a>
                </h3>
                <div class="slds-tile__detail ">
                    <p class="slds-text-heading_medium">{matchedCount}</p>
                    <p class="slds-truncate" title="Schedules">
                    </p>
                </div>
              </article>            
            </div>
            <div class="slds-col" style="margin: 2.5px 0px 2px 20px;" >
              <article class="slds-tile slds-tile_board">
                <h3 class="slds-tile__title slds-truncate" title="Total Schedules">
                    <a href="javascript:void(0);">Unmatched Schedules :</a>
                </h3>
                <div class="slds-tile__detail ">
                    <p class="slds-text-heading_medium">{unmatchedCount}</p>
                    <p class="slds-truncate" title="Schedules">
                    </p>
                </div>
              </article>            
            </div>      
            <div class="slds-col" style="font-size: 1.2rem; margin: 2.5px 0px 2px 20px;" >
              <article class="slds-tile slds-tile_board">
                <h3 class="slds-tile__title slds-truncate" title="Total Schedules">
                    <a href="javascript:void(0);">Total Schedules :</a>
                </h3>
                <div class="slds-tile__detail ">
                    <p class="slds-text-heading_medium">{count}</p>
                    <p class="slds-truncate" title="Schedules">
                    </p>
                </div>
              </article>
             </div>        
          </div>
      </div>

        <div class="slds-col" style="padding: 2.5px; text-align: center;">
          <div style="display: inline-block; margin-bottom: 1.5rem;">
            <h3 style="font-weight: bold; font-size: 1.1rem;">Cell Color Key: </h3>
          </div>

          <div class="slds-grid">
            <div class="slds-grid_vertical-align-center slds-size_1-of-2">
              <div class="slds-grid_vertical slds-size_1-of-2;">
                <div class="slds-col">
                  <div style="text-overflow:ellipsis;overflow: hidden; text-align:left">
                    <span>              
                      <div style="margin-right: 1rem; border-radius: 5px; background-color: lightgrey; display: inline-block; vertical-align: top; height: 20px; width: 20px; margin-bottom: 15px; border: 1px solid black; clear: both;"></div>
                      SF Sched
                    </span>
                  </div>
                </div>
                  <div class="slds-col">
                    <div style="text-overflow:ellipsis;overflow: hiden; text-align: left;">
                      <span>              
                        <div style="margin-right: 1rem; border-radius: 5px; background-color: #275c7a; display: inline-block; vertical-align: top; height: 20px; width: 20px; margin-bottom: 15px; border: 1px solid black; clear: both;"></div>
                        BA Sched
                      </span>
                    </div>
                  </div>
                <div class="slds-col">
                  <div style="text-overflow:ellipsis;overflow: hiden; text-align: left;">
                    <span>              
                      <div style="margin-right: 1rem; border-radius: 5px; background-color:rgb(119, 212, 25); display: inline-block; vertical-align: top; height: 20px; width: 20px; margin-bottom: 15px; border: 1px solid black; clear: both;"></div>
                          Rate +
                    </span>
                  </div>
                </div>
              </div>
            </div>
            <div class="slds-grid_vertical-align-center slds-size_1-of-2 ">
              <div class="slds-col">
                <div style="text-overflow:ellipsis;overflow: hiden; text-align: left;">
                  <span>              
                    <div style="margin-right: 1rem; border-radius: 5px; background-color: #ed9f2b; display: inline-block; vertical-align: top; height: 20px; width: 20px; margin-bottom: 15px; border: 1px solid black; clear: both;"></div>
                    ISCI Change
                  </span>
                </div>
              </div>
              <div class="slds-col">
                <div style="text-overflow:ellipsis;overflow: hiden; text-align: left;">
                  <span>             
                    <div style="margin-right: 1rem; border-radius: 5px; background-color: #43b5d8; display: inline-block; vertical-align: top; height: 20px; width: 20px; margin-bottom: 15px; border: 1px solid black; clear: both;"></div>
                    Phone Change
                  </span>
                </div>
              </div>
              <div class="slds-col">
                <div style="text-overflow:ellipsis;overflow: hiden; text-align: left;">
                  <span>             
                    <div style="margin-right: 1rem; border-radius: 5px; background-color: rgb(214, 86, 111); display: inline-block; vertical-align: top; height: 20px; width: 20px; margin-bottom: 15px; border: 1px solid black; clear: both;"></div>
                    Rate -
                  </span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
   
    <br/>
    <lightning-card if:true={error} icon-name="custom:custom53" title='Error!'>
      <div class="slds-card__body slds-card__body_inner">{error.body.message}</div>
    </lightning-card>

    <br/>
    <div if:true={displayColumnsAndHeaders}>
      <div style="height: 500px;">
          <lightning-datatable columns={columns} 
                                data={data} 
                                hide-checkbox-column="true" 
                                onrowaction={handleScheduleView}
                                key-field="id">
          </lightning-datatable>
      </div>

      <div class="custom-footer">
        <c-update-button export-matches={exportMatches} export-unmatches={exportUnmatches}></c-update-button>
      </div>
   </div>
  </lightning-card>
</template>









